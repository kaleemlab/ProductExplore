{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mac/Desktop/expo-boilerplate-main/src/screens/SearchScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { ActivityIndicator, Avatar, Caption, Card, Searchbar, Subheading, Title, TouchableRipple } from \"react-native-paper\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { MainContainer } from \"../components\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport firebase from \"../../firebase\";\n\nvar SearchScreen = function SearchScreen() {\n  var navigation = useNavigation();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filteredDataSource = _useState4[0],\n      setFilteredDataSource = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      masterDataSource = _useState6[0],\n      setMasterDataSource = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  useEffect(function () {\n    var subscriber = firebase.firestore().collection('posts').orderBy(\"time\", \"desc\").onSnapshot(function (querySnapshot) {\n      var posts = [];\n      querySnapshot.forEach(function (documentSnapshot) {\n        posts.push(_objectSpread(_objectSpread({}, documentSnapshot.data()), {}, {\n          key: documentSnapshot.id\n        }));\n      });\n      setFilteredDataSource(posts);\n      setMasterDataSource(posts);\n      setLoading(false);\n    });\n    return function () {\n      return subscriber();\n    };\n  }, []);\n\n  var searchFilterFunction = function searchFilterFunction(text) {\n    if (text) {\n      var newData = masterDataSource.filter(function (item) {\n        var itemData = item.name ? item.name.toUpperCase() : ''.toUpperCase();\n        var textData = text.toUpperCase();\n        return itemData.indexOf(textData) > -1;\n      });\n      setFilteredDataSource(newData);\n      setSearch(text);\n    } else {\n      setFilteredDataSource(masterDataSource);\n      setSearch(text);\n    }\n  };\n\n  if (loading) {\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        flexDirection: \"column\",\n        width: '100%',\n        alignItems: 'center',\n        justifyContent: 'center',\n        textAlignVertical: 'center',\n        textAlign: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 16\n      }\n    }, React.createElement(ActivityIndicator, {\n      color: \"#6202ED\",\n      size: \"large\",\n      style: {\n        flex: 0.7,\n        width: '100%'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }), React.createElement(Title, {\n      style: {\n        marginTop: 5,\n        flex: 0.2,\n        width: '100%',\n        alignItems: 'center',\n        fontSize: 15,\n        justifyContent: 'center',\n        textAlignVertical: 'center',\n        textAlign: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, \"\\uD83D\\uDE80 Loading your next favourite product \\uD83D\\uDD0D\"));\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, React.createElement(SafeAreaView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }), React.createElement(MainContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, React.createElement(Searchbar, {\n    style: {\n      marginHorizontal: 10\n    },\n    placeholder: \"Search by Name\",\n    onChangeText: function onChangeText(text) {\n      return searchFilterFunction(text);\n    },\n    value: search,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }), React.createElement(View, {\n    style: {\n      height: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }), React.createElement(FlatList, {\n    style: {\n      flex: 1,\n      width: '100%',\n      paddingHorizontal: 10\n    },\n    data: filteredDataSource,\n    keyExtractor: function keyExtractor(item, index) {\n      return index.toString();\n    },\n    showsVerticalScrollIndicator: false,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(Card, {\n        onPress: function onPress() {\n          return navigation.navigate(\"HomeDetail\", {\n            postObject: item\n          });\n        },\n        elevation: 1,\n        mode: \"elevated\",\n        style: {\n          marginVertical: 5,\n          borderRadius: 4\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }\n      }, React.createElement(Card.Title, {\n        title: item.name,\n        subtitle: item.description,\n        left: function left(props) {\n          return React.createElement(Avatar.Image, _extends({}, props, {\n            size: 45,\n            source: item.logo.length !== 0 ? {\n              uri: item.logo\n            } : require(\"../../assets/favicon.png\"),\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 37\n            }\n          }));\n        },\n        rightStyle: {\n          marginRight: 10\n        },\n        right: function right(props) {\n          return React.createElement(TouchableRipple, {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 37\n            }\n          }, React.createElement(View, {\n            style: {\n              flex: 1,\n              borderWidth: 1,\n              borderColor: 'lightgray',\n              borderRadius: 10,\n              padding: 5,\n              marginTop: 5,\n              justifyContent: 'center',\n              flexDirection: 'column',\n              alignItems: 'center'\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 41\n            }\n          }, React.createElement(Ionicons, {\n            name: \"caret-up\",\n            size: 25,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 45\n            }\n          }), React.createElement(Subheading, {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 45\n            }\n          }, item.totalVote)));\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 29\n        }\n      }), React.createElement(View, {\n        style: {\n          flexDirection: 'row',\n          justifyContent: 'center',\n          alignContent: 'center',\n          flex: 3,\n          flexWrap: 'wrap',\n          paddingHorizontal: 10,\n          marginTop: 5,\n          alignItems: 'center'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 29\n        }\n      }, React.createElement(Caption, {\n        style: {\n          justifyContent: 'center',\n          alignItems: 'center',\n          flex: 1,\n          textAlignVertical: \"center\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 33\n        }\n      }, \"by \", item.userName.split(\" \")[0]), React.createElement(Caption, {\n        style: {\n          justifyContent: 'center',\n          alignItems: 'center',\n          flex: 1,\n          textAlignVertical: \"center\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 33\n        }\n      }, item.selectedPrice, \" Options\"), React.createElement(Caption, {\n        style: {\n          justifyContent: 'center',\n          alignItems: 'center',\n          flex: 1,\n          textAlignVertical: \"center\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 33\n        }\n      }, item.selectedCategory)));\n    },\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  })));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingTop: 35\n  }\n});\nexport default SearchScreen;","map":{"version":3,"sources":["/Users/mac/Desktop/expo-boilerplate-main/src/screens/SearchScreen.js"],"names":["React","useEffect","useState","useNavigation","ActivityIndicator","Avatar","Caption","Card","Searchbar","Subheading","Title","TouchableRipple","MainContainer","Ionicons","firebase","SearchScreen","navigation","search","setSearch","filteredDataSource","setFilteredDataSource","masterDataSource","setMasterDataSource","loading","setLoading","subscriber","firestore","collection","orderBy","onSnapshot","querySnapshot","posts","forEach","documentSnapshot","push","data","key","id","searchFilterFunction","text","newData","filter","item","itemData","name","toUpperCase","textData","indexOf","flex","flexDirection","width","alignItems","justifyContent","textAlignVertical","textAlign","marginTop","fontSize","styles","container","marginHorizontal","height","paddingHorizontal","index","toString","navigate","postObject","marginVertical","borderRadius","description","props","logo","length","uri","require","marginRight","borderWidth","borderColor","padding","totalVote","alignContent","flexWrap","userName","split","selectedPrice","selectedCategory","StyleSheet","create","paddingTop"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {useNavigation} from \"@react-navigation/native\";\nimport {\n    ActivityIndicator,\n    Avatar,\n    Caption,\n    Card,\n    Searchbar,\n    Subheading,\n    Title,\n    TouchableRipple\n} from \"react-native-paper\";\nimport {FlatList, SafeAreaView, StyleSheet, View} from \"react-native\";\nimport {MainContainer} from \"../components\";\nimport {Ionicons} from \"@expo/vector-icons\";\nimport firebase from \"../../firebase\";\n\nconst SearchScreen = () => {\n    const navigation = useNavigation();\n\n    const [search, setSearch] = useState('');\n    const [filteredDataSource, setFilteredDataSource] = useState([]);\n    const [masterDataSource, setMasterDataSource] = useState([]);\n    const [loading, setLoading] = useState(true); // Set loading to true on component mount\n\n    useEffect(() => {\n        const subscriber = firebase.firestore()\n            .collection('posts')\n            .orderBy(\"time\", \"desc\")\n            .onSnapshot(querySnapshot => {\n                const posts = [];\n\n                querySnapshot.forEach(documentSnapshot => {\n                    posts.push({\n                        ...documentSnapshot.data(),\n                        key: documentSnapshot.id,\n                    });\n                });\n\n                setFilteredDataSource(posts);\n                setMasterDataSource(posts);\n                setLoading(false);\n            });\n\n        return () => subscriber();\n    }, []);\n\n    const searchFilterFunction = (text) => {\n        if (text) {\n            const newData = masterDataSource.filter(\n                function (item) {\n                    const itemData = item.name\n                        ? item.name.toUpperCase()\n                        : ''.toUpperCase();\n                    const textData = text.toUpperCase();\n                    return itemData.indexOf(textData) > -1;\n                });\n            setFilteredDataSource(newData);\n            setSearch(text);\n        } else {\n            setFilteredDataSource(masterDataSource);\n            setSearch(text);\n        }\n    };\n\n    if (loading) {\n        return <View style={{\n            flex: 1,\n            flexDirection: \"column\",\n            width: '100%',\n            alignItems: 'center',\n            justifyContent: 'center',\n            textAlignVertical: 'center',\n            textAlign: 'center',\n        }}>\n            <ActivityIndicator\n                color={\"#6202ED\"}\n                size={\"large\"}\n                style={{\n                    flex: 0.7, width: '100%'\n                }}/>\n            <Title style={{\n                marginTop: 5,\n                flex: 0.2, width: '100%',\n                alignItems: 'center',\n                fontSize: 15,\n                justifyContent: 'center',\n                textAlignVertical: 'center',\n                textAlign: 'center'\n            }}>🚀 Loading your next favourite product 🔍</Title>\n        </View>;\n    }\n\n\n    return (\n        <View style={styles.container}>\n            <SafeAreaView/>\n            <MainContainer>\n                <Searchbar\n                    style={{marginHorizontal: 10}}\n                    placeholder=\"Search by Name\"\n                    onChangeText={(text) => searchFilterFunction(text)}\n                    value={search}\n                />\n                <View style={{height: 10}}/>\n                <FlatList\n                    style={{flex: 1, width: '100%', paddingHorizontal: 10}}\n                    data={filteredDataSource}\n                    keyExtractor={(item, index) => index.toString()}\n                    showsVerticalScrollIndicator={false}\n                    renderItem={({item}) => (\n                        <Card\n                            onPress={() => navigation.navigate(\"HomeDetail\", {\n                                postObject: item\n                            })}\n                            elevation={1}\n                            mode={\"elevated\"}\n                            style={{marginVertical: 5, borderRadius: 4}}>\n                            <Card.Title\n                                title={item.name}\n                                subtitle={item.description}\n                                left={(props) =>\n                                    <Avatar.Image {...props}\n                                                  size={45}\n                                                  source={item.logo.length !== 0 ? {uri: item.logo} : require('../../assets/favicon.png')}/>\n                                }\n                                rightStyle={{marginRight: 10}}\n                                right={(props) =>\n                                    <TouchableRipple>\n                                        <View style={{\n                                            flex: 1,\n                                            borderWidth: 1,\n                                            borderColor: 'lightgray',\n                                            borderRadius: 10,\n                                            padding: 5,\n                                            marginTop: 5,\n                                            justifyContent: 'center',\n                                            flexDirection: 'column',\n                                            alignItems: 'center'\n                                        }}>\n                                            <Ionicons name=\"caret-up\" size={25}/>\n                                            <Subheading>{item.totalVote}</Subheading>\n                                        </View>\n                                    </TouchableRipple>\n                                }\n                            />\n                            <View\n                                style={{\n                                    flexDirection: 'row',\n                                    justifyContent: 'center',\n                                    alignContent: 'center',\n                                    flex: 3,\n                                    flexWrap: 'wrap',\n                                    paddingHorizontal: 10,\n                                    marginTop: 5,\n                                    alignItems: 'center'\n                                }}>\n                                <Caption style={{\n                                    justifyContent: 'center', alignItems: 'center',\n                                    flex: 1, textAlignVertical: \"center\"\n                                }}>by {(item.userName).split(\" \")[0]}</Caption>\n                                <Caption style={{\n                                    justifyContent: 'center', alignItems: 'center',\n                                    flex: 1, textAlignVertical: \"center\"\n                                }}>{item.selectedPrice} Options</Caption>\n                                <Caption style={{\n                                    justifyContent: 'center', alignItems: 'center',\n                                    flex: 1, textAlignVertical: \"center\"\n                                }}>{item.selectedCategory}</Caption>\n                            </View>\n                        </Card>\n\n                    )}\n                    keyExtractor={(item) => item.id}\n                />\n            </MainContainer>\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        paddingTop: 35,\n    },\n});\nexport default SearchScreen;\n"]},"metadata":{},"sourceType":"module"}